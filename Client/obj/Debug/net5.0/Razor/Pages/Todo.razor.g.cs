#pragma checksum "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\Pages\Todo.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "b1c9eb320092f19166d0f37ac8c6f857da22c3cb"
// <auto-generated/>
#pragma warning disable 1591
namespace ToDo.Client.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\_Imports.razor"
using System.Net.Http.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.WebAssembly.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\_Imports.razor"
using ToDo.Client;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\_Imports.razor"
using ToDo.Client.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\_Imports.razor"
using Plk.Blazor.DragDrop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\Pages\Todo.razor"
using ToDo.Shared;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/")]
    [Microsoft.AspNetCore.Components.RouteAttribute("/todo")]
    public partial class Todo : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "div");
            __builder.AddAttribute(1, "class", "main");
            __builder.OpenElement(2, "div");
            __builder.AddAttribute(3, "class", "container-fluid ");
            __builder.AddAttribute(4, "id", "page-content");
            __builder.OpenElement(5, "div");
            __builder.AddAttribute(6, "class", "padding");
            __builder.OpenElement(7, "div");
            __builder.AddAttribute(8, "class", "row  d-flex justify-content-start add-title-container");
            __builder.OpenElement(9, "div");
            __builder.AddAttribute(10, "class", "col-md-6");
            __builder.OpenElement(11, "div");
            __builder.AddAttribute(12, "class", "d-flex");
            __builder.OpenElement(13, "input");
            __builder.AddAttribute(14, "class", "form-control form-control-lg add-text");
            __builder.AddAttribute(15, "type", "text");
            __builder.AddAttribute(16, "placeholder", "Title for ToDo");
            __builder.AddAttribute(17, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 15 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\Pages\Todo.razor"
                                                                                                      newTodoTitle

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(18, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => newTodoTitle = __value, newTodoTitle));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.AddMarkupContent(19, "\r\n\r\n                        ");
            __builder.OpenElement(20, "button");
            __builder.AddAttribute(21, "type", "button");
            __builder.AddAttribute(22, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 18 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\Pages\Todo.razor"
                                                        AddTodoTitle

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(23, "class", "btn btn-outline-success btn-lg");
            __builder.AddContent(24, "Add Title");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 23 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\Pages\Todo.razor"
             if(ShowLoading) {

#line default
#line hidden
#nullable disable
            __builder.OpenComponent<ToDo.Client.Shared.LoadingScreen>(25);
            __builder.CloseComponent();
#nullable restore
#line 25 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\Pages\Todo.razor"
            }
            else {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(26, "div");
            __builder.AddAttribute(27, "class", "row");
            __builder.OpenElement(28, "div");
            __builder.AddAttribute(29, "class", "col-md-12");
            __builder.OpenElement(30, "div");
            __builder.AddAttribute(31, "class", "container-fluid no-padding");
            __builder.OpenElement(32, "div");
            __builder.AddAttribute(33, "class", "card-columns");
            __builder.OpenComponent<Plk.Blazor.DragDrop.Dropzone<Category>>(34);
            __builder.AddAttribute(35, "Items", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Collections.Generic.IList<Category>>(
#nullable restore
#line 31 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\Pages\Todo.razor"
                                             ToDoList

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(36, "InstantReplace", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 31 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\Pages\Todo.razor"
                                                                       true

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(37, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment<Category>)((context) => (__builder2) => {
                __builder2.OpenElement(38, "div");
                __builder2.AddAttribute(39, "class", "card");
                __builder2.OpenElement(40, "div");
                __builder2.AddAttribute(41, "class", "card-header");
                __builder2.AddContent(42, 
#nullable restore
#line 33 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\Pages\Todo.razor"
                                                               context.Title

#line default
#line hidden
#nullable disable
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(43, "\r\n                                    ");
                __builder2.OpenElement(44, "div");
                __builder2.AddAttribute(45, "class", "card-body");
                __builder2.OpenElement(46, "div");
                __builder2.AddAttribute(47, "class", "list-wrapper");
                __builder2.OpenElement(48, "div");
                __builder2.AddAttribute(49, "class", "todo-list");
#nullable restore
#line 37 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\Pages\Todo.razor"
                                                     if(@context.ToDo != null ){

#line default
#line hidden
#nullable disable
                __builder2.OpenElement(50, "ul");
#nullable restore
#line 39 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\Pages\Todo.razor"
                                                         foreach (var items in @context.ToDo)
                                                        {   

#line default
#line hidden
#nullable disable
                __builder2.OpenElement(51, "li");
                __builder2.AddContent(52, 
#nullable restore
#line 41 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\Pages\Todo.razor"
                                                                     items.Title

#line default
#line hidden
#nullable disable
                );
                __builder2.CloseElement();
#nullable restore
#line 42 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\Pages\Todo.razor"
                                                        }

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
#nullable restore
#line 44 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\Pages\Todo.razor"
                                                    }
                                                    else{

#line default
#line hidden
#nullable disable
                __builder2.AddMarkupContent(53, "<div class=\"alert alert-info mt-3 mb-3 pt-5 pb-5\" style=\"font-size: 13px;\">\r\n                                                            Please add your todo items here\r\n                                                        </div>");
#nullable restore
#line 49 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\Pages\Todo.razor"
                                                    }

#line default
#line hidden
#nullable disable
                __builder2.CloseElement();
                __builder2.AddMarkupContent(54, "\r\n                                            ");
                __builder2.OpenElement(55, "div");
                __builder2.AddAttribute(56, "class", "todo-add d-flex");
                __builder2.OpenElement(57, "input");
                __builder2.AddAttribute(58, "class", "form-control");
                __builder2.AddAttribute(59, "type", "text");
                __builder2.AddAttribute(60, "placeholder", "Add items");
                __builder2.AddAttribute(61, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 52 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\Pages\Todo.razor"
                                                                                                     newTodo

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(62, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => newTodo = __value, newTodo));
                __builder2.SetUpdatesAttributeName("value");
                __builder2.CloseElement();
#nullable restore
#line 54 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\Pages\Todo.razor"
                                                  
                                                    var todoCategory = @context;
                                                

#line default
#line hidden
#nullable disable
                __builder2.OpenElement(63, "button");
                __builder2.AddAttribute(64, "type", "button");
                __builder2.AddAttribute(65, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 58 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\Pages\Todo.razor"
                                                              () => AddTodoItem(todoCategory)

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(66, "class", "btn btn-outline-success");
                __builder2.AddContent(67, "Add");
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.CloseElement();
                __builder2.CloseElement();
            }
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 105 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\Pages\Todo.razor"
            }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 115 "D:\USERS\RAFEEK\Work\Blazor\ToDo\Client\Pages\Todo.razor"
       
      
    private string newTodo, newTodoTitle;
    private Category[] categories ;
    private Category newCat = new Category();
    public List<Category> ToDoList = null;
    
    private bool ShowLoading {get; set;}

    protected override async Task OnInitializedAsync()
    {
        ShowLoading = true;
        ToDoList = new List<Category>();
        categories = await Http.GetFromJsonAsync<Category[]>("api/category");
        //await JSRuntime.InvokeVoidAsync("alert", System.Text.Json.JsonSerializer.Serialize(categories)); 
        if (categories != null ) {
            foreach (var category in categories){
                 ToDoList.Add(category);
            }
             
        } 

        ShowLoading = false;

    }

    private async Task AddTodoTitle()
    {
      
        newCat = new  Category();

        newCat.Title = newTodoTitle;
        newCat.Active = 1;
        newCat.Sort = 1;       
        

        await Http.PostAsJsonAsync<Category>("api/category", newCat);
        await OnInitializedAsync();

        newTodoTitle = "";
        
    }

    private async Task AddTodoItem(Category cat) {
        newCat = new Category();
        newCat = cat;
        
        List<TodoItem> mydoList = new List<TodoItem>();
        mydoList.Add(new TodoItem(){Title=newTodo, Active=1, Sort=1});

        if (newCat.ToDo != null) {
            foreach (var items in cat.ToDo)
            {   
                mydoList.Add(new TodoItem(){Title=items.Title, Active=items.Active, Sort=items.Sort});
            } 
        }
        
        newCat.ToDo = mydoList; 
        await Http.PutAsJsonAsync<Category>("api/category/"+newCat.CategoryID, newCat);

        await OnInitializedAsync();
        newTodo = "";
    }
    public void OnItemDrop()
    {
       // DropedItem = item;
        StateHasChanged();
    }
    public void OnReplacedItemDrop()
    {
       // replacedItem = item;
        StateHasChanged();
    }

   /* public List<TodoItem> ToDoList = new List<TodoItem>() {
       new TodoItem(){Title = "Style this list"},
        new TodoItem(){Title = "Fix a bug"},
        new TodoItem(){Title = "Build a feature"},
        new TodoItem(){Title = "Create a PR"}
    }; */

  /*  public List<TodoItem> MyToDoList = new List<TodoItem>()
    {
            new TodoItem(){
                Title = "Drag this item", 
                TaskList=[
                    
                ]            
            },
            new TodoItem(){
                Title = "Add another item",
                TaskList = []
            },
            new TodoItem(){
                Title = "Remove this item",
                TaskList = []
            }
                
          //  new TodoItem(){Title = "Style this list"},
           // new TodoItem(){Title = "Fix a bug"},
           // new TodoItem(){Title = "Build a feature"},
           // new TodoItem(){Title = "Create a PR"},
    }; */

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime JSRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient Http { get; set; }
    }
}
#pragma warning restore 1591
